# apiVersion: argoproj.io/v1alpha1
# kind: ApplicationSet
# metadata:
#   name: signoz
#   namespace: argocd
# spec:
#   generators:
#   - list:
#       elements:
#       - name: dev-demo
#         server: https://kubernetes.default.svc
#         revision: 0.105.2

#   template:
#     metadata:
#       name: 'signoz-{{name}}'
#     spec:
#       project: hands-on

#       source:
#         repoURL: 'https://charts.signoz.io'
#         chart: signoz
#         targetRevision: '{{revision}}'
#         helm:
#           valuesObject:
#             global:
#               cloud: aws
#               storageClass: gp3

#             clickhouseOperator:
#               resources:
#                 limits:
#                   cpu: 500m
#                   memory: 512Mi
#                 requests:
#                   cpu: 100m
#                   memory: 256Mi

#             clickhouse:
#               installCustomStorageClass: false 
#               persistence:
#                 enabled: true
#                 storageClass: gp3
#                 size: 20Gi

#             zookeeper:
#               persistence:
#                 enabled: true
#                 storageClass: gp3
#                 size: 5Gi
#               resources:
#                 limits:
#                   cpu: 500m
#                   memory: 512Mi
#                 requests:
#                   cpu: 200m
#                   memory: 256Mi

#       destination:
#         server: '{{server}}'
#         namespace: signoz

#       syncPolicy:
#         automated:
#           prune: true
#           selfHeal: true
#         syncOptions:
#           - CreateNamespace=true
#           - ServerSideApply=true